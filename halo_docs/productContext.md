# 抽卡系统产品上下文

## 产品概述
这是一个基于React+TypeScript的前端抽卡系统，模拟移动游戏中的卡牌抽取机制。系统完全基于前端实现，使用localStorage进行数据存储，无需后端服务器即可运行。

## 核心价值
- **完整的抽卡体验**：提供真实的抽卡游戏体验，包括动画效果、保底机制等
- **教育和演示**：展示抽卡系统的技术实现和概率机制
- **可扩展架构**：采用适配层模式，便于后续对接真实后端服务
- **纯前端解决方案**：无需服务器，可直接部署到静态网站托管服务

## 目标用户
- **游戏开发者**：学习抽卡系统的实现机制
- **产品经理**：了解抽卡系统的设计和用户体验
- **技术爱好者**：研究前端数据管理和状态管理
- **学习者**：学习React、TypeScript等现代前端技术

## 核心功能

### 1. 抽卡系统
- **六级稀有度**：N、R、SR、SSR、UR、LR完整稀有度体系
- **智能保底机制**：
  - 硬保底：90抽必出SSR
  - 软保底：75抽后概率逐渐增加
  - 保底重置：获得保底后重新计算
- **多种抽卡方式**：单抽和十连抽
- **动画效果**：流畅的抽卡动画和结果展示

### 2. 货币系统
- **金币（💰）**：基础货币，用于标准卡包
- **抽卡券（🎫）**：高级货币，用于高级卡包
- **高级货币（💎）**：顶级货币，用于传说卡包

### 3. 卡包系统
- **标准卡包**：使用金币，标准概率分布
- **高级卡包**：使用抽卡券，提高稀有卡牌概率
- **传说卡包**：使用高级货币，最高稀有卡牌概率

### 4. 用户系统
- **用户账户**：完整的用户数据管理
- **资产管理**：多种货币的获取和消耗
- **收藏系统**：卡牌收集和展示

### 5. 数据统计
- **个人统计**：抽卡次数、获得卡牌、消费记录
- **全局统计**：系统整体数据分析
- **历史记录**：详细的抽卡历史追踪

### 6. 管理功能
- **卡牌管理**：添加、编辑、删除卡牌
- **卡包管理**：配置卡包概率和内容
- **模板系统**：卡牌属性模板管理
- **数据导入导出**：完整的数据备份和恢复

## 技术特点

### 架构设计
- **适配层模式**：统一的数据访问接口（DataAdapter）
- **上下文管理**：React Context进行状态管理
- **类型安全**：完整的TypeScript类型定义
- **组件化**：模块化的React组件架构

### 数据管理
- **本地存储**：基于localStorage的数据持久化
- **缓存系统**：智能缓存提升性能
- **数据验证**：概率验证和数据完整性检查
- **错误处理**：完善的错误处理机制

### 用户体验
- **响应式设计**：适配桌面端和移动端
- **流畅动画**：基于Framer Motion的动画效果
- **实时反馈**：即时的操作反馈和通知
- **直观界面**：清晰的信息展示和操作流程

## 业务逻辑

### 抽卡算法
1. **概率计算**：基于配置的概率分布
2. **保底检查**：检查是否触发保底机制
3. **随机抽取**：使用伪随机数生成器
4. **结果处理**：处理重复卡牌和新卡牌

### 保底机制
- **计数器管理**：为每个卡包维护独立的保底计数器
- **概率加成**：接近保底时逐渐增加概率
- **强制触发**：达到最大次数时强制出货
- **重置机制**：获得保底后重置计数器

### 数据流转
1. **用户操作** → 前端界面
2. **数据请求** → 适配层接口
3. **数据处理** → LocalStorageAdapter
4. **结果返回** → 界面更新
5. **状态同步** → 上下文更新

## 扩展性

### 后端对接
- 通过实现新的DataAdapter可以轻松对接后端API
- 保持现有业务逻辑不变
- 支持渐进式迁移

### 功能扩展
- 支持更多稀有度等级
- 添加卡牌属性和战斗系统
- 实现社交功能和排行榜
- 添加活动和限时卡包

### 平台适配
- 可以打包为移动应用
- 支持PWA（渐进式Web应用）
- 可以集成到现有游戏中

## 商业价值
- **技术展示**：展示现代前端技术能力
- **原型验证**：快速验证抽卡系统设计
- **教育培训**：用于技术培训和教学
- **基础框架**：作为更大项目的基础组件 